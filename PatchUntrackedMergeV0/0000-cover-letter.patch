From cfd97454870b96d45106f4047c5c34d2a3a2c8a3 Mon Sep 17 00:00:00 2001
From: Jonathan <Jonathan.bressat@etu.univ-lyon1.fr>
Date: Thu, 7 Apr 2022 19:53:30 +0200
Subject: [PATCH 0/2] Be nicer to the user on tracked/untracked merge conflicts

When doing a merge while there is untracked files with the same name
as merged files, git refuses to proceed. This patch make git overwrite
files if their content are the same.

We added a statement to check_ok_to_remove() (unpack-trees.c) 
with ie_modified() (read-cache.c) to test if the untracked file 
has the same content as the merged one. It seems to work well 
with all three o->result, o->dst_index and o->src_index,
I'm not sure of what is the usage of those three, did we used it properly ?

Our tests need some improvement, for example using test_commit,
and testing more possibilities, It's not a real patch, just 
to comfirm if we are on the right track.

The next idea is when it's a fastforward, attempt to merge the
untracked file and the upstream version (like if the file had
just been committed, but without intruducing an extra commit).

you can see this idea hear : https://git.wiki.kernel.org/index.php/SmallProjectsIdeas#Be_nicer_to_the_user_on_tracked.2Funtracked_merge_conflicts

Jonathan (2):
  Test: t/t7615-merge-untracked.sh
  Merge with untracked file that are the same without failure

 t/t7615-merge-untracked.sh | 83 ++++++++++++++++++++++++++++++++++++++
 unpack-trees.c             |  3 ++
 2 files changed, 86 insertions(+)
 create mode 100755 t/t7615-merge-untracked.sh

-- 
2.35.1.7.gc8609858e0.dirty

